<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·é€”æ—…è¡Œè€…è½¦æœºåŠ©æ‰‹ï½œè§£é” ADB å·¥å…·â€”â€”@å¤§ä¼¦å“¥çš„CDM</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš—</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    <!-- è‡ªå®šä¹‰å¼¹çª—æ ·å¼ -->
    <style>
        /* è‡ªå®šä¹‰å¼¹çª—æ ·å¼ */
        .custom-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .custom-modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 15px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .custom-modal-header {
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }

        .custom-modal-title {
            margin: 0;
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        .custom-modal-body {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .custom-modal-body a {
            color: #007bff;
            text-decoration: none;
        }
        
        .custom-modal-body a:hover {
            text-decoration: underline;
        }
        
        .custom-modal-footer {
            text-align: right;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .custom-modal-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        
        .custom-modal-btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .custom-modal-btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .custom-modal-btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .custom-modal-btn-danger {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; margin: 10px 0; font-size: 24px; color: #333;">æ·é€”æ—…è¡Œè€…/å±±æµ·T2è½¦æœºå·¥å…·ç®±</h1>
        <div style="text-align: center; margin-bottom: 15px;">
            <a href="https://jyz0501.github.io/jetour-adbtool-usage/" class="btn" style="background-color: #007bff; color: white; padding: 8px 20px; text-decoration: none; border-radius: 4px; margin: 0 5px;">ä½¿ç”¨æ•™ç¨‹</a>
            <a href="https://jyz0501.github.io/jetour_vehicle_password/" class="btn" style="background-color: #007bff; color: white; padding: 8px 20px; text-decoration: none; border-radius: 4px; margin: 0 5px;">å¯†ç å·¥å…·</a>
        </div>
        <!-- å®‰è£…æ–¹å¼ä¸€ï¼šæ‰‹æœºAppæ–¹å¼ (å·²éšè—) -->
        <!-- 
        <div style="margin: 10px 0;">
            <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #333;">å®‰è£…æ–¹å¼ä¸€ï¼šæ‰‹æœºAppæ–¹å¼</h3>
            <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                <a href="https://adb.cheji.cc/apk/sj.apk" class="btn btn-connect" style="flex-shrink: 0;" target="_blank">æ‰‹æœºåŠ©æ‰‹ä¸‹è½½</a>
                <a href="https://101.42.10.175:35070/down/mnfds48btpxq.apk" class="btn btn-connect" style="flex-shrink: 0;" target="_blank">åº”ç”¨ç®¡å®¶ä¸‹è½½</a>
            </div>
        </div>
        -->
        
        <hr style="margin: 15px 0; border: 1px solid #eee;">
        
            <!-- æœ‰çº¿è¿æ¥ -->
            <div style="margin: 10px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #333;">æœ‰çº¿è¿æ¥ <span id="app-version" style="font-size: 12px; color: #999;">v1.187.0</span></h3>
                <div class="warning" id="usb-warning">
                    æ³¨æ„ï¼æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWebUSBã€‚è¯·åœ¨Chromeæˆ–Edgeæµè§ˆå™¨ä¸­æ‰“å¼€ã€‚
                </div>

                <!-- Chrome/Edgeæµè§ˆå™¨ä¸‹è½½åœ°å€å·²éšè—ï¼Œå°†åœ¨æ£€æµ‹åˆ°éæ”¯æŒæµè§ˆå™¨æ—¶å¼¹çª—æ˜¾ç¤º -->

                <div style="margin: 15px 0;">
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 10px;">
                        <button class="btn btn-connect" id="connect-btn" onclick="checkBrowserSupportAndConnect()" style="background-color: #28a745; color: white;">å¼€å§‹è¿æ¥</button>
                        <!-- æ— çº¿è°ƒè¯•åŠŸèƒ½æš‚æ—¶ç¦ç”¨
                        <button class="btn btn-connect" id="wireless-connect-btn" onclick="showChromeDownloadPopup(); wirelessConnect()" style="background-color: #17a2b8; color: white;" title="ä»…ç”¨äºå¼€å¯ADBæ— çº¿è°ƒè¯•ç«¯å£ï¼Œéœ€USBè¿æ¥">æ— çº¿è°ƒè¯•</button>
                        -->
                        <span style="margin-left: 10px; font-weight: bold; color: #28a745;">
                            <span id="device-status">ğŸš— æœªè¿æ¥</span>
                            <span id="device-name" style="margin-left: 5px; color: #666;"></span>
                        </span>
                    </div>
                    <p style="font-size: 12px; color: #6c757d; margin: 0;">
                        æœ‰çº¿è¿æ¥ï¼šä½¿ç”¨Chromeæˆ–Edgeæµè§ˆå™¨ + OTGçº¿è¿æ¥è½¦æœºUSBå£ã€‚<br>
                        <!-- æ— çº¿è°ƒè¯•åŠŸèƒ½æš‚æ—¶ç¦ç”¨ -->
                        <!-- æ— çº¿è°ƒè¯•ï¼šéœ€å…ˆé€šè¿‡USBè¿æ¥è®¾å¤‡ï¼Œç„¶åä½¿ç”¨ç³»ç»Ÿå·¥å…·ä¸­çš„"æ— çº¿ADB"åŠŸèƒ½å¼€å¯ç«¯å£ï¼Œä¾›å‘½ä»¤è¡Œadbä½¿ç”¨ï¼ˆæµè§ˆå™¨ä¸æ”¯æŒç›´æ¥TCPè¿æ¥ï¼‰ã€‚ -->
                    </p>
                </div>
                <!-- è®¾å¤‡æƒ…å†µæ—¥å¿— -->
                <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 4px; font-size: 12px; font-family: monospace; max-height: 100px; overflow-y: auto;">
                    <div style="font-weight: bold; margin-bottom: 5px; color: #333;">è®¾å¤‡æƒ…å†µæ—¥å¿—ï¼š</div>
                    <div id="device-log" style="white-space: pre-wrap;">æ­£åœ¨åˆå§‹åŒ–...</div>
                </div>
            </div>
                
                <hr style="margin: 20px 0; border: 1px solid #eee;">
                
                <!-- å¿…è£…è½¯ä»¶ -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">å¿…è£…è½¯ä»¶</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-connect" onclick="yygj()" style="flex-shrink: 0;">åº”ç”¨ç®¡å®¶</button>
                        <button class="btn btn-connect" onclick="cdb()" style="flex-shrink: 0;">ä¾§è¾¹æ </button>
                        <button class="btn btn-connect" onclick="qzm()" style="flex-shrink: 0;">æ°¢æ¡Œé¢</button>
                        <button class="btn btn-connect" onclick="sfgj()" style="flex-shrink: 0;">æ²™å‘ç®¡å®¶</button>    
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                        <button class="btn btn-connect" onclick="startGuanJia()" style="flex-shrink: 0; background-color: #28a745;">å¯åŠ¨åº”ç”¨ç®¡å®¶</button>
                        <button class="btn btn-connect" onclick="exec_shell('monkey -p com.mcar.auto -c android.intent.category.LAUNCHER 1')" style="flex-shrink: 0;">å¯åŠ¨æ°¢æ¡Œé¢</button>
                        <button class="btn btn-connect" onclick="exec_shell('monkey -p com.hzsoft.sidebar -c android.intent.category.LAUNCHER 1')" style="flex-shrink: 0;">å¯åŠ¨ä¾§è¾¹æ </button>
                        <button class="btn btn-connect" onclick="exec_shell('monkey -p com.shafa.markethd -c android.intent.category.LAUNCHER 1')" style="flex-shrink: 0;">å¯åŠ¨æ²™å‘ç®¡å®¶</button>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">è¯·å…ˆå®‰è£…ä»¥ä¸Šè½¯ä»¶ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚</p>
                </div>
                
                <!-- å…¶ä»–è½¯ä»¶ -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">å…¶ä»–è½¯ä»¶</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-connect" onclick="qxg()" style="flex-shrink: 0;">æƒé™ç‹—</button>
                        <button class="btn btn-connect" onclick="sentry()" style="flex-shrink: 0;">å“¨å…µç›‘æ§</button>
                        <button class="btn btn-connect" onclick="hstrip()" style="flex-shrink: 0;">å°æ¨ªæ¡</button>
                        <button class="btn btn-connect" onclick="ykpip()" style="flex-shrink: 0;">æ˜“æ§è½¦æœºPIP</button>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">æ ¹æ®éœ€è¦é€‰æ‹©å®‰è£…å…¶ä»–è½¯ä»¶ã€‚</p>
                </div>
                
                <!-- è‡ªé€‰å®‰è£… -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">è‡ªä¸»å®‰è£…</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <input type="file" id="apkFile" multiple accept=".apk" style="display: none;">
                        <button class="btn btn-connect" onclick="loadApkFile()" style="flex-shrink: 0;">é€‰æ‹©æ–‡ä»¶</button>
                        <span id="apkFileName" style="flex: 1; min-width: 200px; padding: 8px; background-color: white; border: 1px solid #dee2e6; border-radius: 4px;">æœªé€‰æ‹©æ–‡ä»¶</span>
                        <button class="btn btn-connect" onclick="installApkFile()" style="flex-shrink: 0; background-color: #007bff;">å®‰è£…æ‰€é€‰</button>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">æ“ä½œç‚¹å‡»æŒ‰é’®åè¯·é™å€™ç­‰å¾…æ‰§è¡Œç»“æœï¼Œåˆ‡å‹¿é‡å¤ç‚¹å‡»ï¼</p>
                </div>
                
                <!-- Shell Command Input -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">æ‰‹åŠ¨å‘½ä»¤</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <input type="text" id="shell" placeholder="è¾“å…¥å‘½ä»¤ï¼ˆä¸ç”¨è¾“å…¥adb shellï¼‰" style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        <button class="btn btn-connect" onclick="exec_command()" style="flex-shrink: 0;">æ‰§è¡Œå‘½ä»¤</button>
                    </div>
                </div>
                
                <!-- åº”ç”¨ç®¡ç† -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">åº”ç”¨ç®¡ç†</h4>
                    
                    <!-- åˆ·æ–°ç”¨æˆ·åº”ç”¨åˆ—è¡¨ -->
                    <button class="btn btn-connect" onclick="loadPackageList()" style="margin-bottom: 15px;">åˆ·æ–°ç”¨æˆ·åº”ç”¨åˆ—è¡¨</button>
                    
                    <!-- å·²å®‰è£…åº”ç”¨åˆ—è¡¨ -->
                    <table id="package-list" style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                        <thead>
                            <tr style="background-color: #e9ecef;">
                                <th style="padding: 8px; border: 1px solid #dee2e6; width: 50px;">åºå·</th>
                                <th style="padding: 8px; border: 1px solid #dee2e6; width: 100%; word-break: break-all;">åŒ…å</th>
                                <th style="padding: 8px; border: 1px solid #dee2e6; width: 80px; white-space: nowrap;">æ“ä½œ</th>
                                <th style="padding: 8px; border: 1px solid #dee2e6; width: 80px; white-space: nowrap;">å¸è½½</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- åº”ç”¨åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Log Area -->
                <div id="exec-result">
                    <div id="exec-result-toggle" onclick="toggleExecResult()">â–¼ ç‚¹å‡»æŠ˜å æ‰§è¡Œç»“æœ</div>
                    <h4>æ‰§è¡Œç»“æœ</h4>
                    <div class="progress" id="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
                    </div>
                    <div id="log"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toasts -->
    <div class="toast" id="downloading-toast">
        <div>æ­£åœ¨ä¸‹è½½ï¼Œè¯·ç¨å€™...</div>
        <div id="download-progress">
            <div id="download-progress-bar"></div>
        </div>
        <div id="download-progress-text">0%</div>
    </div>
    
    <div class="toast" id="success-toast">
        è®¾å¤‡è¿æ¥æˆåŠŸï¼
    </div>
    
    <!-- è‡ªå®šä¹‰å¼¹çª— -->
    <div id="customModal" class="custom-modal">
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <h4 class="custom-modal-title" id="modalTitle">æç¤º</h4>
            </div>
            <div class="custom-modal-body" id="modalBody">
                å¼¹çª—å†…å®¹
            </div>
            <div class="custom-modal-footer" id="modalFooter">
                <button class="custom-modal-btn custom-modal-btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="custom-modal-btn custom-modal-btn-primary" onclick="confirmModal()">ç¡®å®š</button>
            </div>
        </div>
    </div>
    
    <!-- ADB æ ¸å¿ƒæ¨¡å— -->
    <!-- ä½¿ç”¨ ya-webadb åº“ (Tango ADB) -->
    <script src="js/lib/tango-adb.js" onerror="console.error('Failed to load tango-adb.js')"></script>

    <!-- è‡ªç ” ADB æ¨¡å—ï¼ˆå¤‡ç”¨ï¼‰ -->
    <!-- <script src="js/adb/transport.js"></script> -->
    <!-- <script src="js/adb/message.js"></script> -->
    <!-- <script src="js/adb/device.js"></script> -->
    <!-- <script src="js/adb/index.js"></script> -->

    <!-- Custom JavaScript -->
    <script src="js/utils.js"></script>
    <script src="js/device.js"></script>
    <script src="js/apps.js"></script>
    <script src="js/system.js"></script>
    <!-- ç§»é™¤main.jsï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´æ— é™é€’å½’ -->
    <!-- <script src="js/main.js"></script> -->

    <!-- é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æµè§ˆå™¨æ”¯æŒ -->
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebUSB
        window.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
            checkWebUSBSupport();
        });

        // æŠ˜å /å±•å¼€æ‰§è¡Œç»“æœ
        function toggleExecResult() {
            const execResult = document.getElementById('exec-result');
            const toggleBtn = document.getElementById('exec-result-toggle');
            if (execResult.classList.contains('collapsed')) {
                execResult.classList.remove('collapsed');
                toggleBtn.textContent = 'â–¼ ç‚¹å‡»æŠ˜å æ‰§è¡Œç»“æœ';
            } else {
                execResult.classList.add('collapsed');
                toggleBtn.textContent = 'â–² ç‚¹å‡»å±•å¼€æ‰§è¡Œç»“æœ';
            }
        }
        
        // è·å–å¹¶æ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆåŸºäºGitæäº¤æ¬¡æ•°ï¼‰
        function updateVersion() {
            // ç‰ˆæœ¬å·ç”± GitHub Actions åœ¨æ„å»ºæ—¶æ³¨å…¥åˆ° HTML ä¸­
            // æœ¬åœ°å¼€å‘æ—¶æ˜¾ç¤ºå ä½ç¬¦ï¼Œéƒ¨ç½²åæ˜¾ç¤ºå®é™…ç‰ˆæœ¬å·
            const versionElement = document.getElementById('app-version');
            if (versionElement) {
                // ç›´æ¥ä½¿ç”¨ HTML ä¸­å·²æ³¨å…¥çš„ç‰ˆæœ¬å·
                // GitHub Actions ä¼šå°† <!--version--> æ›¿æ¢ä¸ºå®é™…ç‰ˆæœ¬å·
                const versionText = versionElement.textContent;
                // å¦‚æœè¿˜æ˜¯å ä½ç¬¦ï¼Œåˆ™ä¸æ˜¾ç¤ºæˆ–æ˜¾ç¤ºé»˜è®¤å€¼
                if (versionText.includes('<!--version-->')) {
                    versionElement.textContent = 'å¼€å‘ä¸­';
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ›´æ–°ç‰ˆæœ¬å·
        updateVersion();
    </script>
</body>
</html>