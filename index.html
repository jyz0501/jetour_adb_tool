<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·é€”å¤§ä¼¦å“¥çš„åº”ç”¨ç®¡å®¶</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- è‡ªå®šä¹‰å¼¹çª—æ ·å¼ -->
    <style>
        /* è‡ªå®šä¹‰å¼¹çª—æ ·å¼ */
        .custom-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .custom-modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .custom-modal-header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .custom-modal-title {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }
        
        .custom-modal-body {
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .custom-modal-body a {
            color: #007bff;
            text-decoration: none;
        }
        
        .custom-modal-body a:hover {
            text-decoration: underline;
        }
        
        .custom-modal-footer {
            text-align: right;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .custom-modal-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .custom-modal-btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .custom-modal-btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .custom-modal-btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .custom-modal-btn-danger {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å®‰è£…æ–¹å¼ä¸€ï¼šæ‰‹æœºAppæ–¹å¼ -->
        <div style="margin: 10px 0;">
            <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #333;">å®‰è£…æ–¹å¼ä¸€ï¼šæ‰‹æœºAppæ–¹å¼</h3>
            <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                <a href="https://adb.cheji.cc/apk/sj.apk" class="btn btn-connect" style="flex-shrink: 0;" target="_blank">æ‰‹æœºåŠ©æ‰‹ä¸‹è½½</a>
                <a href="https://file.vju.cc/%E5%BA%94%E7%94%A8%E7%AE%A1%E5%AE%B6/%E5%BA%94%E7%94%A8%E7%AE%A1%E5%AE%B61.8.0%E5%85%AC%E7%AD%BE%E7%89%88.apk" class="btn btn-connect" style="flex-shrink: 0;" target="_blank">åº”ç”¨ç®¡å®¶ä¸‹è½½</a>
            </div>
        </div>
        
        <hr style="margin: 15px 0; border: 1px solid #eee;">
        
        <!-- å®‰è£…æ–¹å¼äºŒï¼šWebUSBæ–¹å¼ -->
        <div style="margin: 10px 0;">
            <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #333;">å®‰è£…æ–¹å¼äºŒï¼šWebUSBæ–¹å¼</h3>
            <div class="warning" id="usb-warning">
                æ³¨æ„ï¼æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWebUSBã€‚<br>
                è¯·åœ¨Edgeæµè§ˆå™¨ä¸­æ‰“å¼€
            </div>
            
            <!-- Edgeæµè§ˆå™¨ä¸‹è½½åœ°å€å·²éšè—ï¼Œå°†åœ¨æ£€æµ‹åˆ°éæ”¯æŒæµè§ˆå™¨æ—¶å¼¹çª—æ˜¾ç¤º -->
            
            <div style="margin: 15px 0;">
                <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 10px;">
                        <button class="btn btn-connect" id="connect-btn" onclick="showEdgeDownloadPopup(); connect()" style="background-color: #28a745; color: white;">æœ‰çº¿è¿æ¥</button>
                        <button class="btn btn-connect" id="wireless-connect-btn" onclick="showEdgeDownloadPopup(); wirelessConnect()" style="background-color: #17a2b8; color: white;">æ— çº¿è¿æ¥</button>
                        <button class="btn btn-disconnect" id="disconnect-btn" onclick="disconnect()" style="background-color: #dc3545; color: white;">æ–­å¼€è¿æ¥</button>
                        <div style="flex: 1; text-align: right;">
                            <span style="margin-right: 8px;">ğŸš— </span>
                            <span id="device-status" style="font-weight: bold;">æœªè¿æ¥</span>
                        </div>
                    </div>
                <p style="font-size: 12px; color: #6c757d; margin: 0;">
                    å¦‚æ˜¾ç¤º"æ‰¾ä¸åˆ°å…¼å®¹è®¾å¤‡"ï¼Œè¯·é‡æ–°æ‹”æ’OTGçº¿çš„è½¦æœºç«¯çš„USBå£ æˆ– æ£€æŸ¥adbé€šé“æ˜¯å¦è¢«å…¶å®ƒå ç”¨ã€‚
                </p>
                <!-- è®¾å¤‡æƒ…å†µæ—¥å¿— -->
                <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 4px; font-size: 12px; font-family: monospace; max-height: 100px; overflow-y: auto;">
                    <div style="font-weight: bold; margin-bottom: 5px; color: #333;">è®¾å¤‡æƒ…å†µæ—¥å¿—ï¼š</div>
                    <div id="device-log" style="white-space: pre-wrap;">æ­£åœ¨åˆå§‹åŒ–...</div>
                </div>
            </div>
                
                <hr style="margin: 20px 0; border: 1px solid #eee;">
                
                <!-- å¿…è£…è½¯ä»¶ -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">å¿…è£…è½¯ä»¶</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-connect" onclick="yygj()" style="flex-shrink: 0;">åº”ç”¨ç®¡å®¶</button>
                        <button class="btn btn-connect" onclick="cdb()" style="flex-shrink: 0;">ä¾§è¾¹æ </button>
                        <button class="btn btn-connect" onclick="qzm()" style="flex-shrink: 0;">æ°¢æ¡Œé¢</button>
                        <button class="btn btn-connect" onclick="sfgj()" style="flex-shrink: 0;">æ²™å‘ç®¡å®¶</button>    
                        <button class="btn btn-connect" onclick="qxg()" style="flex-shrink: 0;">æƒé™ç‹—</button>        
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">è¯·å…ˆå®‰è£…ä»¥ä¸Šè½¯ä»¶ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚</p>
                </div>
                
                <!-- è‡ªé€‰å®‰è£… -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">è‡ªä¸»å®‰è£…</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <input type="file" id="apkFile" multiple accept=".apk" style="display: none;">
                        <button class="btn btn-connect" onclick="loadApkFile()" style="flex-shrink: 0;">é€‰æ‹©æ–‡ä»¶</button>
                        <span id="apkFileName" style="flex: 1; min-width: 200px; padding: 8px; background-color: white; border: 1px solid #dee2e6; border-radius: 4px;">æœªé€‰æ‹©æ–‡ä»¶</span>
                        <button class="btn btn-connect" onclick="installApkFile()" style="flex-shrink: 0; background-color: #007bff;">å®‰è£…æ‰€é€‰</button>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">æ“ä½œç‚¹å‡»æŒ‰é’®åè¯·é™å€™ç­‰å¾…æ‰§è¡Œç»“æœï¼Œåˆ‡å‹¿é‡å¤ç‚¹å‡»ï¼</p>
                </div>
                
                <!-- Shell Command Input -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">æ‰‹åŠ¨å‘½ä»¤</h4>
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <input type="text" id="shell" placeholder="è¾“å…¥ADBå‘½ä»¤" style="flex: 1; min-width: 300px; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        <button class="btn btn-connect" onclick="exec_command()" style="flex-shrink: 0;">æ‰§è¡Œå‘½ä»¤</button>
                    </div>
                </div>
                
                <!-- åº”ç”¨ç®¡ç† -->
                <div style="margin: 20px 0; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">åº”ç”¨ç®¡ç†</h4>
                    
                    <!-- å¸¸ç”¨åº”ç”¨å¯åŠ¨æŒ‰é’® -->
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 15px;">
                        <button class="btn btn-connect" onclick="startAhuiApp()" style="flex-shrink: 0; background-color: #28a745;">å¯åŠ¨åº”ç”¨ç®¡å®¶</button>
                        <button class="btn btn-connect" onclick="exec_shell('monkey -p com.oversea.aslauncher -c android.intent.category.LAUNCHER 1')" style="flex-shrink: 0;">å¯åŠ¨æ¡Œé¢</button>
                        <button class="btn btn-connect" onclick="exec_shell('monkey -p com.android.settings -c android.intent.category.LAUNCHER 1')" style="flex-shrink: 0;">å¯åŠ¨è®¾ç½®</button>
                        <button class="btn btn-connect" onclick="exec_shell('am start -W -n com.hzsoft.sidebar/.MainActivity')" style="flex-shrink: 0;">å¯åŠ¨ä¾§è¾¹æ </button>
                    </div>
                    
                    <!-- åˆ·æ–°åº”ç”¨åˆ—è¡¨ -->
                    <button class="btn btn-connect" onclick="loadPackageList()" style="margin-bottom: 15px;">åˆ·æ–°åº”ç”¨åˆ—è¡¨</button>
                    
                    <!-- å·²å®‰è£…åº”ç”¨åˆ—è¡¨ -->
                    <table id="package-list" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background-color: #e9ecef;">
                                <th style="padding: 8px; border: 1px solid #dee2e6;">åºå·</th>
                                <th style="padding: 8px; border: 1px solid #dee2e6;">åŒ…å</th>
                                <th style="padding: 8px; border: 1px solid #dee2e6;">æ“ä½œ</th>
                                <th style="padding: 8px; border: 1px solid #dee2e6;">å¸è½½</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- åº”ç”¨åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Progress Bar -->
                <div class="progress" id="progress">
                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
                </div>
                
                <!-- Log Area -->
                <div id="exec-result">
                    <h4>æ‰§è¡Œç»“æœ</h4>
                    <div id="log"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toasts -->
    <div class="toast" id="downloading-toast">
        <div>æ­£åœ¨ä¸‹è½½ï¼Œè¯·ç¨å€™...</div>
        <div id="download-progress">
            <div id="download-progress-bar"></div>
        </div>
        <div id="download-progress-text">0%</div>
    </div>
    
    <div class="toast" id="success-toast">
        è®¾å¤‡è¿æ¥æˆåŠŸï¼
    </div>
    
    <!-- è‡ªå®šä¹‰å¼¹çª— -->
    <div id="customModal" class="custom-modal">
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <h4 class="custom-modal-title" id="modalTitle">æç¤º</h4>
            </div>
            <div class="custom-modal-body" id="modalBody">
                å¼¹çª—å†…å®¹
            </div>
            <div class="custom-modal-footer" id="modalFooter">
                <button class="custom-modal-btn custom-modal-btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="custom-modal-btn custom-modal-btn-primary" onclick="confirmModal()">ç¡®å®š</button>
            </div>
        </div>
    </div>
    
    <!-- ADB æ ¸å¿ƒæ¨¡å— -->
    <script src="js/adb/transport.js"></script>
    <script src="js/adb/message.js"></script>
    <script src="js/adb/device.js"></script>
    <script src="js/adb/index.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="js/utils.js"></script>
    <script src="js/device.js"></script>
    <script src="js/apps.js"></script>
    <script src="js/system.js"></script>
    <!-- ç§»é™¤main.jsï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´æ— é™é€’å½’ -->
    <!-- <script src="js/main.js"></script> -->
    
    <!-- é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æµè§ˆå™¨æ”¯æŒ -->
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebUSB
        window.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
            checkWebUSBSupport();
        });
    </script>
</body>
</html>